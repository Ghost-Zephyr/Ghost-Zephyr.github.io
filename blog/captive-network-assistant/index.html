<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name='robots' content='index,follow'>
  
    <title>Sivert Does Stuff Online! - Apple CNA (Captive Network Assistant)</title>
  
  
    <meta name='description' content='The Apple &#34;Captive Network Assistant&#34; is some software running on Apple devices that checks if Wi-Fi networks have captive portal setups and potentially starts a sand-boxed browser to do the portal login.'>
  
  
    
      <link rel='icon' href='/favicon.2a782c1d4fdbd387db5d712ee87bd8b01eb0cf56bd95198f4cc6a84ccf8bfb7e.png' integrity='sha256-KngsHU/b04fbXXEu6HvYsB6wz1a9lRmPTMaoTM&#43;L&#43;34=' />
    
    
      <link rel="apple-touch-icon" href="/favicon_hu5ee1517d9ee6726a25cfeec6a86e1947_41990_192x192_resize_box_3.3306e29c64ba856a2bd380475dcf6fcf81e835e05927358f6e225bbbdf44032a.png"  integrity='sha256-MwbinGS6hWor04BHXc9vz4HoNeBZJzWPbiJbu99EAyo=' />
    
  
  <meta name='viewport' content='width=device-width,initial-scale=1.0'>
  <meta name="theme-color" content="#00FF00" />
  
  
  <meta name='twitter:card' content='summary'>
  <meta property='og:title' content='Sivert Does Stuff Online!' />
  <meta property='og:url' content='' />
  <meta property='og:site_name' content='Sivert Does Stuff Online!' />
  
  <meta name="generator" content="Hugo 0.106.0">
  <link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/css/bootstrap.min.css' crossorigin='anonymous'>
  
  
  
    <link href='/main.min.15a34a6ce4d3fc26538f8271b2938a96a83603e15a32531e2171ad4eca808ede.css' integrity="sha256-FaNKbOTT/CZTj4JxspOKlqg2A+FaMlMeIXGtTsqAjt4=" rel='stylesheet'>
  
  <script defer data-domain="io.sivert.pw" src="https://anal.42069.no/js/script.js"></script>
</head>
<body>
  <header>
    <nav id='navbar'>
  <ul class='top-nav'>
    <li><a href='/'>Sivert Does Stuff Online!</a></li>
    
    
    
    

<li>
  <a href='/blog/apprentice'>
    
    <span>Apprentice docs</span>
  </a>
</li>

    
    <li id='right'>
      <ul>
      
      

<li>
  <a href='https://sivert.pw'>
    
    <span>My Humble Homepage</span>
  </a>
</li>

      
      

<li>
  <a href='/old'>
    
    <span>Old GitHub.io</span>
  </a>
</li>

      
      

<li>
  <a href='/about'>
    
    <span>About</span>
  </a>
</li>

      
      

<li>
  <a href='/blog'>
    
    <span>Blog</span>
  </a>
</li>

      
      
      </ul>
    </li>
  </ul>
</nav>
  </header>
  <div id='content'>
    <main>
      
      <div class='row'>
        <div class='col-md-2'>
          <aside id='meta'>
  <header>
    <h4>Apple CNA (Captive Network Assistant)</h4>
    
    <p>
      This article has 357 words.
      2 minutes to read.
    </p>
    <p>
      The Apple &#34;Captive Network Assistant&#34; is some software running on Apple devices that checks if Wi-Fi networks have captive portal setups and potentially starts a sand-boxed browser to do the portal login.
    </p>
  </header>
  
  
  
  
  
  
</aside>

        </div>
        <div class='col-md-10'>
          
<article>
  <header>
    <h1>Apple CNA (Captive Network Assistant)</h1>
  </header>
  <p>Now I may be biased as I&rsquo;ve had to work with captive portals and been annoyed by Apples sand-boxed captive network assistants web browser.
Apples CNA sandbox browser does not allow any sort of persistent storage on the device.
To the point where localStorage is outright disallowed and cookies are not stored between sessions.
It&rsquo;s also not allowed to open new windows/tabs as the browser only has the one window you get and won&rsquo;t allow any attempts to get out of the sandbox by opening a new window or open some app.</p>
<p>What&rsquo;s very curious however is the fact that most stack overflow questions about the Apples captive portal browser is about using Facebook as the authentication method which we (<a href='https://skylabs.no' target='_blank'>Sky Labs</a>) have had for a long time.
But where I finally had to face this pice of ðŸ’© was with the Norwegian payment service called <a href='https://vipps.no' target='_blank'>Vipps</a>.
For anyone not in the loop Vipps is like Norwegian Venmo/CashApp.
Although the whole selling point of Vipps is its &ldquo;instant&rdquo; payments.</p>
<p>The one single limitation of Apples CNA sandbox browser that throws a gigantic wrench into our Vipps integration is no opening of app links.
This causes it to be pretty finicky to login on the same device as one is trying to pay with.
So we expect end-users to get very annoyed and confused by this.</p>
<p>One alternative to get the users out of the sandbox browser is to preemptively give them full network access and send them to their normal browser to do the payment.
But we want to avoid that option as it would require RADIUS CoA (Change of Authorization) to be working for us to be able to kick out users that starts the payment process, but doesn&rsquo;t complete it.
And we&rsquo;re already having issues around this with our paid SMS authentication method.</p>
<p>If we&rsquo;re lucky enough to have Vipps help us, they could probably make it so that the app always send the user to our specified web page after payment.
Not just when waiting on the Vipps webpage for payment on another device or after having the app opened from an app link.</p>
<!-- raw HTML omitted -->

</article>

        </div>
      </div>
      
    </main>
  </div>
  <footer>
  <center>
  <div class='footer-content'>
    <p>2020 - 2023 &copy; Sivert V. SÃ¦ther</p>
  </div>
  
</center>
  </footer>
</body>

</html>
